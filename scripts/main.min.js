var ctx=document.getElementById("myChart").getContext("2d"),data={labels:[],datasets:[{label:"",backgroundColor:"rgb(0,123,255, 0.4)",borderColor:"rgb(0,123,255)",data:[]}]};function Const(e,t,o,i){this.topic=e,this.intensity=t,this.relevance=o,this.likelihood=i}var Topic=new Const([],[],[],[]),Sector=new Const([],[],[],[]),Region=new Const([],[],[],[]),Pestle=new Const([],[],[],[]),parameters=[[Topic,"topic"],[Sector,"sector"],[Region,"region"],[Pestle,"pestle"]];$.getJSON("scripts/jsondata.json").done(function(e){e.length;var t=e;getTopic(t),getSector(t),getRegion(t),getPestle(t),getData(t);for(var o=0;o<parameters.length;o++)getIntensity(t,parameters[o][0],parameters[o][1]),getRelevance(t,parameters[o][0],parameters[o][1]),getLikelihood(t,parameters[o][0],parameters[o][1]);setData(Topic.intensity,Topic.topic,"Avg. Intensity","rgb(0,123,255, 0.4)","rgb(0,123,255)");var i=new Chart(ctx,{type:"radar",data:data,options:{scale:{ticks:{suggestedMin:0,suggestedMax:limit}}}});function n(e,t){var o,n,c,l,r,a,s="",g=[],d="",p="";document.getElementById("intensity").checked&&(document.querySelector("#value").textContent="Intensity",g=e.intensity,d="rgb(0,123,255, 0.4)",p="rgb(0,123,255)",s="Avg. Intensity"),document.getElementById("relevance").checked&&(document.querySelector("#value").textContent="Relevance",g=e.relevance,d="rgb(255,193,7, 0.4)",p="rgb(255,193,7)",s="Avg. Relevance"),document.getElementById("likelihood").checked&&(document.querySelector("#value").textContent="Likelihood",g=e.likelihood,d="rgb(40,167,69, 0.4)",p="rgb(40,167,69)",s="Avg. Likelihood"),n=t,c=g,l=d,r=p,a=s,(o=i).data.labels=n,o.data.datasets[0].label=a,o.data.datasets[0].data=c,o.data.datasets[0].backgroundColor=l,o.data.datasets[0].borderColor=r,o.update()}document.querySelector("#label").textContent="Topic",document.querySelector("#value").textContent="Intensity",document.getElementById("submit").addEventListener("click",function(){!function(){var e=[];document.getElementById("topic").checked&&(document.querySelector("#label").textContent="Topic",e=Topic.topic,n(Topic,e));document.getElementById("sector").checked&&(document.querySelector("#label").textContent="Sector",e=Sector.topic,n(Sector,e));document.getElementById("region").checked&&(document.querySelector("#label").textContent="Region",e=Region.topic,n(Region,e));document.getElementById("pestle").checked&&(document.querySelector("#label").textContent="Pestle",e=Pestle.topic,n(Pestle,e))}()})});var limit,value=[];function setData(e,t,o,i,n){data.datasets[0].label=o,data.datasets[0].backgroundColor=i,data.datasets[0].borderColor=n,limit=5;for(var c=0;c<t.length;c++)data.labels.push(t[c]),data.datasets[0].data.push(e[c])}function getTopic(e){for(var t=0;t<e.length;t++){0===Topic.topic.length&&Topic.topic.push(e[t].topic);for(var o=0;o<Topic.topic.length&&(Topic.topic[o]!=e[t].topic&&""!=e[t].topic);o++)if(o===Topic.topic.length-1){Topic.topic.push(e[t].topic);break}}}function getSector(e){for(var t=0;t<e.length;t++){0===Sector.topic.length&&Sector.topic.push(e[t].sector);for(var o=0;o<Sector.topic.length&&(Sector.topic[o]!=e[t].sector&&""!=e[t].sector);o++)if(o===Sector.topic.length-1){Sector.topic.push(e[t].sector);break}}}function getRegion(e){for(var t=0;t<e.length;t++){0===Region.topic.length&&Region.topic.push(e[t].region);for(var o=0;o<Region.topic.length&&(Region.topic[o]!=e[t].region&&""!=e[t].region);o++)if(o===Region.topic.length-1){Region.topic.push(e[t].region);break}}}function getPestle(e){for(var t=0;t<e.length;t++){0===Pestle.topic.length&&Pestle.topic.push(e[t].pestle);for(var o=0;o<Pestle.topic.length&&(Pestle.topic[o]!=e[t].pestle&&""!=e[t].pestle);o++)if(o===Pestle.topic.length-1){Pestle.topic.push(e[t].pestle);break}}}function getIntensity(e,t,o){for(var i=0;i<t.topic.length;i++){value=[];for(var n=0;n<e.length;n++)"topic"===o&&(e[n].key=e[n].topic),"sector"===o&&(e[n].key=e[n].sector),"region"===o&&(e[n].key=e[n].region),"pestle"===o&&(e[n].key=e[n].pestle),t.topic[i]===e[n].key&&(""===e[n].intensity&&(e[n].intensity=0),value.push(e[n].intensity));t.intensity.push(value)}getAverageIntensity(t)}function getAverageIntensity(e){for(var t,o=0;o<e.intensity.length;o++){t=0;for(var i=0;i<e.intensity[o].length;i++)t+=e.intensity[o][i];e.intensity[o]=Math.floor(t/e.intensity[o].length)}}function getRelevance(e,t,o){for(var i=0;i<t.topic.length;i++){value=[];for(var n=0;n<e.length;n++)"topic"===o&&(e[n].key=e[n].topic),"sector"===o&&(e[n].key=e[n].sector),"region"===o&&(e[n].key=e[n].region),"pestle"===o&&(e[n].key=e[n].pestle),t.topic[i]===e[n].key&&(""===e[n].relevance&&(e[n].relevance=0),value.push(e[n].relevance));t.relevance.push(value)}getAverageRelevance(t)}function getAverageRelevance(e){for(var t,o=0;o<e.relevance.length;o++){t=0;for(var i=0;i<e.relevance[o].length;i++)t+=e.relevance[o][i];e.relevance[o]=Math.floor(t/e.relevance[o].length)}}function getLikelihood(e,t,o){for(var i=0;i<t.topic.length;i++){value=[];for(var n=0;n<e.length;n++)"topic"===o&&(e[n].key=e[n].topic),"sector"===o&&(e[n].key=e[n].sector),"region"===o&&(e[n].key=e[n].region),"pestle"===o&&(e[n].key=e[n].pestle),t.topic[i]===e[n].key&&(""===e[n].likelihood&&(e[n].likelihood=0),value.push(e[n].likelihood));t.likelihood.push(value)}getAverageLikelihood(t)}function getAverageLikelihood(e){for(var t,o=0;o<e.likelihood.length;o++){t=0;for(var i=0;i<e.likelihood[o].length;i++)t+=e.likelihood[o][i];e.likelihood[o]=Math.floor(t/e.likelihood[o].length)}}function getData(e){for(var t=1,o="",i=1;i<=e.length/20;i++)""===e[i].topic&&(e[i].topic="N.A."),""===e[i].title&&(e[i].title="N.A."),""===e[i].sector&&(e[i].sector="N.A."),""===e[i].insight&&(e[i].insight="N.A."),""===e[i].source&&(e[i].source="N.A."),""===e[i].country&&(e[i].country="N.A."),o+='<button type="button" class="list-group-item list-group-item-action" ><div class="title col-md-12 container-fluid"> <div class="row"><div class="col-md-1 topic"> '+e[i].topic+'</div><div class="col-md-3 title">'+e[i].title+'</div><div class="col-md-1 sector">'+e[i].sector+'</div><div class="col-md-3 insight">'+e[i].insight+'</div><div class="col-md-2 source">'+e[i].source+'</div><div class="col-md-2 country">'+e[i].country+"</div></div></div></button>",i%10==0&&0!=i&&(document.querySelector(".page").innerHTML+='<div class="col-md-12 cells" id="cell-'+t+'">'+o+"</div>",o="",t++)}